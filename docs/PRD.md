# RealWorld (Conduit) - 製品要求仕様書

## 1. プロジェクト概要

### 1.1 プロジェクト名
**Conduit** - ソーシャルブログプラットフォーム

### 1.2 プロジェクトの目的
Medium.com クローンとして、記事の投稿・閲覧、ユーザー間のソーシャル機能を提供するフルスタックウェブアプリケーション。RealWorld 仕様に準拠した実装により、実践的なアプリケーション開発スキルを習得する。

### 1.3 参照仕様
- RealWorld 公式ドキュメント: https://realworld-docs.netlify.app/
- RealWorld API 仕様: https://github.com/gothinkster/realworld/tree/main/api

---

## 2. 機能要件

### 2.1 認証・ユーザー管理

#### 2.1.1 ユーザー登録
- メールアドレス、ユーザー名、パスワードによる新規登録
- 登録完了後、JWT トークンを発行
- トークンは localStorage に保存

#### 2.1.2 ログイン
- メールアドレスとパスワードによる認証
- 認証成功時に JWT トークンを発行
- トークンは localStorage に保存

#### 2.1.3 ログアウト
- 設定ページからログアウト可能
- localStorage からトークンを削除

#### 2.1.4 ユーザー情報管理
- **作成**: 登録時に自動作成
- **読取**: 現在のユーザー情報を取得
- **更新**: プロフィール画像、ユーザー名、自己紹介、メールアドレス、パスワードの変更
- **削除**: 不要（仕様対象外）

### 2.2 記事管理

#### 2.2.1 記事作成
- タイトル、説明、本文（Markdown）、タグリストを入力
- 作成時に自動的に slug を生成
- 作成者情報を自動付与

#### 2.2.2 記事閲覧
- グローバルフィード: 全記事を最新順で表示
- ユーザーフィード: フォロー中のユーザーの記事のみ表示
- タグフィルター: 特定タグの記事のみ表示
- ページネーション対応（デフォルト: 10件/ページ）

#### 2.2.3 記事更新
- タイトル、説明、本文の編集
- 作成者のみ編集可能

#### 2.2.4 記事削除
- 作成者のみ削除可能
- 関連するコメント、お気に入りも削除

### 2.3 コメント機能

#### 2.3.1 コメント作成
- 記事に対してコメントを投稿
- ログインユーザーのみ投稿可能

#### 2.3.2 コメント閲覧
- 記事ごとのコメント一覧を表示
- 作成日時順で表示

#### 2.3.3 コメント削除
- コメント作成者のみ削除可能
- **更新機能は不要**（仕様対象外）

### 2.4 ソーシャル機能

#### 2.4.1 フォロー/アンフォロー
- 他のユーザーをフォロー可能
- フォロー中のユーザーの記事をフィードで表示
- フォロー解除可能

#### 2.4.2 お気に入り（いいね）
- 記事にお気に入りを追加
- お気に入り解除可能
- 記事ごとのお気に入り数を表示

### 2.5 タグ機能
- 記事作成時にタグを付与
- 人気タグ一覧を表示
- タグによる記事フィルタリング

---

## 3. 画面構成

### 3.1 共通レイアウト

#### ヘッダー（未ログイン時）
- Conduit ロゴ（ホームへのリンク）
- Home
- Sign in
- Sign up

#### ヘッダー（ログイン時）
- Conduit ロゴ（ホームへのリンク）
- Home
- New Article
- Settings
- プロフィール（ユーザー名 + アイコン）

#### フッター
- Conduit ブランド
- 著作権表示

### 3.2 ページ一覧

| ルート | ページ名 | 説明 |
|--------|---------|------|
| `/#/` | ホーム | 記事フィード、人気タグ |
| `/#/login` | ログイン | ログインフォーム |
| `/#/register` | 新規登録 | 登録フォーム |
| `/#/settings` | 設定 | ユーザー設定、ログアウト |
| `/#/editor` | 新規記事 | 記事作成フォーム |
| `/#/editor/:slug` | 記事編集 | 記事編集フォーム |
| `/#/article/:slug` | 記事詳細 | 記事本文、コメント |
| `/#/profile/:username` | プロフィール | ユーザー情報、投稿記事 |
| `/#/profile/:username/favorites` | お気に入り | ユーザーのお気に入り記事 |

### 3.3 各ページ詳細

#### 3.3.1 ホームページ (`/#/`)
- バナー（Conduit ロゴと説明）
- フィードタブ
  - Your Feed（ログイン時のみ、フォロー中のユーザーの記事）
  - Global Feed（全記事）
  - #タグ名（タグ選択時）
- 記事プレビュー一覧
  - 著者アイコン、名前、投稿日
  - お気に入りボタンと数
  - タイトル、説明
  - タグリスト
- ページネーション
- サイドバー: 人気タグ一覧

#### 3.3.2 認証ページ (`/#/login`, `/#/register`)
- ページタイトル
- 別ページへのリンク（Sign in ↔ Sign up）
- エラーメッセージ一覧
- フォーム
  - 登録: ユーザー名、メール、パスワード
  - ログイン: メール、パスワード
- 送信ボタン

#### 3.3.3 設定ページ (`/#/settings`)
- プロフィール画像 URL
- ユーザー名
- 自己紹介（textarea）
- メールアドレス
- 新しいパスワード
- Update Settings ボタン
- ログアウトボタン

#### 3.3.4 エディターページ (`/#/editor`, `/#/editor/:slug`)
- 記事タイトル
- 記事の説明（What's this article about?）
- 本文（Markdown）
- タグ入力（Enter で追加）
- Publish Article ボタン

#### 3.3.5 記事詳細ページ (`/#/article/:slug`)
- 記事バナー
  - タイトル
  - 著者情報とフォロー/お気に入りボタン
  - 編集/削除ボタン（作成者のみ）
- 記事本文（Markdown レンダリング）
- タグリスト
- 著者情報セクション（下部）
- コメントセクション
  - コメント入力フォーム
  - コメント一覧（削除ボタン付き）

#### 3.3.6 プロフィールページ (`/#/profile/:username`)
- ユーザー情報
  - プロフィール画像
  - ユーザー名
  - 自己紹介
  - フォローボタン / 設定編集ボタン
- 記事タブ
  - My Articles（投稿記事）
  - Favorited Articles（お気に入り記事）
- 記事一覧

---

## 4. API エンドポイント概要

### 4.1 認証
| メソッド | エンドポイント | 説明 | 認証 |
|---------|---------------|------|------|
| POST | `/api/users/login` | ログイン | 不要 |
| POST | `/api/users` | ユーザー登録 | 不要 |
| GET | `/api/user` | 現在のユーザー取得 | 必須 |
| PUT | `/api/user` | ユーザー情報更新 | 必須 |

### 4.2 プロフィール
| メソッド | エンドポイント | 説明 | 認証 |
|---------|---------------|------|------|
| GET | `/api/profiles/:username` | プロフィール取得 | 任意 |
| POST | `/api/profiles/:username/follow` | フォロー | 必須 |
| DELETE | `/api/profiles/:username/follow` | アンフォロー | 必須 |

### 4.3 記事
| メソッド | エンドポイント | 説明 | 認証 |
|---------|---------------|------|------|
| GET | `/api/articles` | 記事一覧取得 | 任意 |
| GET | `/api/articles/feed` | フィード取得 | 必須 |
| GET | `/api/articles/:slug` | 記事詳細取得 | 任意 |
| POST | `/api/articles` | 記事作成 | 必須 |
| PUT | `/api/articles/:slug` | 記事更新 | 必須 |
| DELETE | `/api/articles/:slug` | 記事削除 | 必須 |

### 4.4 コメント
| メソッド | エンドポイント | 説明 | 認証 |
|---------|---------------|------|------|
| GET | `/api/articles/:slug/comments` | コメント一覧取得 | 任意 |
| POST | `/api/articles/:slug/comments` | コメント作成 | 必須 |
| DELETE | `/api/articles/:slug/comments/:id` | コメント削除 | 必須 |

### 4.5 お気に入り
| メソッド | エンドポイント | 説明 | 認証 |
|---------|---------------|------|------|
| POST | `/api/articles/:slug/favorite` | お気に入り追加 | 必須 |
| DELETE | `/api/articles/:slug/favorite` | お気に入り解除 | 必須 |

### 4.6 タグ
| メソッド | エンドポイント | 説明 | 認証 |
|---------|---------------|------|------|
| GET | `/api/tags` | タグ一覧取得 | 不要 |

---

## 5. 非機能要件

### 5.1 パフォーマンス
- ページ読み込み時間: 3秒以内
- API レスポンス時間: 500ms 以内

### 5.2 セキュリティ
- JWT トークンによる認証
- パスワードのハッシュ化（bcrypt）
- CORS 設定
- XSS 対策
- SQL インジェクション対策（Prisma ORM）

### 5.3 ユーザビリティ
- レスポンシブデザイン対応
- エラーメッセージの明確な表示
- ローディング状態の表示

### 5.4 互換性
- モダンブラウザ対応（Chrome, Firefox, Safari, Edge）
- RealWorld API 仕様との完全互換

---

## 6. 用語集

| 用語 | 説明 |
|------|------|
| Conduit | RealWorld プロジェクトのアプリケーション名 |
| Slug | URL に使用される記事の識別子（例: how-to-train-your-dragon） |
| Feed | ユーザーがフォローしている著者の記事一覧 |
| Global Feed | すべてのユーザーの記事一覧 |
| Favorite | 記事のお気に入り（いいね）機能 |
